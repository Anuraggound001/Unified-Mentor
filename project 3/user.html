<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>User - Gym Management</title>
	<link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
	<header class="app-header">
		<h2>Gym Info</h2>
		<div class="toolbar">
			<button id="signOut">Sign Out</button>
		</div>
	</header>
	<main class="container">
		<section class="card">
			<h3>Search Members (read-only)</h3>
			<input id="query" placeholder="Search by name" />
			<table id="results"><thead><tr><th>Name</th><th>Email</th></tr></thead><tbody></tbody></table>
		</section>

		<section class="card">
			<h3>About</h3>
			<p>Address: 123 Fitness St. | Hours: 6am - 10pm | Contact: 999-999-9999</p>
		</section>
	</main>
	<footer class="app-footer">User &middot; Gym Management</footer>

	<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-app-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-auth-compat.js"></script>
	<script src="https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore-compat.js"></script>
	<script src="assets/js/firebase.js"></script>
	<script src="assets/js/services/logging.js"></script>
	<script src="assets/js/services/auth.js"></script>
	<script src="assets/js/services/db.js"></script>
	<script>
		firebase.auth().onAuthStateChanged(async (u) => {
			if (!u) return window.location.href = 'index.html';
			// user role can be user/member/admin, all can view this page
		});

		document.getElementById('signOut').addEventListener('click', () => AuthService.signOut().then(() => window.location.href = 'index.html'));

		const q = document.getElementById('query');
		q.addEventListener('input', async () => {
			const val = q.value.trim().toLowerCase();
			const members = await DbService.listMembers(200);
			const filtered = members.filter(m => (m.name||'').toLowerCase().includes(val));
			const tbody = document.querySelector('#results tbody');
			tbody.innerHTML = '';
			for (const m of filtered) {
				const tr = document.createElement('tr');
				tr.innerHTML = `<td>${m.name||''}</td><td>${m.email||''}</td>`;
				tbody.appendChild(tr);
			}
		});
	</script>
</body>
</html>


